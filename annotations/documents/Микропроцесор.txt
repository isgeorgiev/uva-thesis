
<doc id="107622" url="https://bg.wikipedia.org/wiki?curid=107622" title="Микропроцесор">
Микропроцесор

Микропроцесорът е централен процесор, в който всички или повечето от математическите и логически операции се изпълняват от една-единствена или най-много от няколко интегрални схеми.
Съвременните технологии в микроелектрониката позволяват всички необходими електрически вериги да бъдат интегрирани на един или няколко чипа, като при това производственият процес е напълно автоматизиран и позволява производството на голям брой изделия на приемлива цена. С това нараства и надеждността им на работа, тъй като чувствително се намалява вероятността от дефект в електрическите връзки. Всъщност броят на елементарните логически елементи в един съвременен процесор е такъв, че неговото реализиране с дискретни такива е невъзможно както заради споменатия проблем с надеждността така и заради критичното закъснение и съответно фазово изкривяване на тактовите и данновите сигнали по свързващите отделните компоненти и блокове шини.
Използването на микропроцесори позволява и да се създават разнообразни електронни устройства въз основа на един тип микропроцесор, като се използват едни и същи програмни средства за създаване на фамилия управляващи програми. Това предопределя висока серийност и ниска цена на микропроцесорите, както и ниска стойност за разработка на софтуер, а в резултат – бърза разработка и невисока цена на изделията.
Развитието на технологиите за проектиране и производство на интегрални схеми води до създаването на все по-сложни и по-производителни микропроцесори. Съотношението между сложност, цена и време се описва от емпиричния Закон на Мур, според който сложността на интегралните схеми се удвоява на всеки 2 години, със същия темп растат общите производствени разходи за фабриките, а цената на единичните компоненти намалява.
История.
Преди появата на микропроцесорите компютрите се състоят от цели шкафове, често с регулирана температура, с отделни печатни платки с обемен и повърхностен монтаж. Появата на интегрални схеми с постепенно нарастваща степен на интеграция (например "четвърто поколение" компютри съдържат интегрални схеми с висока степен на интеграция) позволява постепенно намаляване на броя и размера на платките и заеманото пространство, като в днешно време има дори едноплаткови компютри. Микропроцесорите се прилагат повсеместно, от вградените системи през мейнфрейм компютрите до суперкомпютрите.
Първият микропроцесор Intel 4004 се появява на пазара през 1971 година в резултат на съвместна разработка на калкулатор между фирмите Intel и Busicom. Той е 4-битов, т.е. данните, които обработва, са представени като 4-битови думи, работи с максимална тактова честота 740 kHz, поддържа 46 команди и е част от микропроцесорна система с още 3 периферни интегрални схеми.
Постепенно биват разработени и 8-, 16-, 32- и 64-битови микропроцесори, а в последните години и такива с повече от едно микропроцесорно ядро.
Основни параметри.
Микропроцесорите могат да се класифицират по няколко признака, свързани до голяма степен с производителността им. Това са скорост, разредност и адресно пространство. Скоростта на микропроцесорите се определя от тактовата честота на синхронизиращите импулси, измервана в мегахерци (MHz) и гигахерци (GHz). Колкото по-голяма е тя, толкова по-голям брой елементарни операции могат да бъдат извършени за единица време. Разредността на микропроцесора се определя от тази на три основни структурни елемента: регистрите, шините за данни и шините за адреси в паметта. Освен тези основни параметри, за класификацията на микропроцесора имат значение и следните показатели – тип и обем на кеш-паметта, брой и степени (дълбочина) на конвейерните вериги, технологии ММХ, 3DNow! и Enhanced 3Dnow и други.
Разрядност.
Според разредността микропроцесорите биват 4, 8, 12, 16, 32, 64 битови:
Първият микропроцесор (1971 г.) е Intel 4004 с разредност 4 бита, който адресира 640 байта памет, работи с тактова честота 108 kHz и има производителност 0,06 MIPS (). Той е използван почти изключително за конструиране на калкулатори. Съдържа 2300 р-канални МОП транзистори и е изпълняван по планарна технология с ширина на линията 10 микрона.
През 1972 г. Intel пуска в продажба процесора i8008, който първоначално работи на честота 200 KHz и притежава 8-битова шина за данни. През 1974 се появява и 8-битовият процесор i8080, с който се конструират терминали, контролери и смятаният за първи персонален компютър Altair. Процесорът има 6000 транзистора, изработван е по 6 микронна технология, с тактова честота 2 MHz и може да адресира 64 КВ памет. Този микропроцесор в продължение на почти цяло десетилетие е световен стандарт сред 8-битовите микропроцесори.
Семейството процесори Intersil 6100 включва 12-битовия микропроцесор Intersil 6100 и множество периферни устройства. Микропроцесорът е съвместим на ниво инструкции с миникомпютъра PDP-8 на DEC. По тази причина е наричан CMOS-PDP8. С оглед на факта, че е произвеждан от Harris Corporation, е известен и като Harris HM-6100. Благодарение на качествата на неговата CMOS технология и свързаните с това предимства, моделът 6100 е част от някои военни разработки до началото на 1980-те.
Intel пуска първия 16-битов процесор i8086 през 1978 година. Той е родоначалник на знаменитото семейство Intel 80х86 (което често се означава като "х86"). Архитектурата на този процесор се отличава значително от архитектурата на 8-битовите микропроцесори, ориентирани към решаване на задачи, изискващи относително малък брой изчислителни операции. В Intel 8086 са реализирани голям набор команди и методи за адресация на паметта и е обезпечена ефективна обработка на прекъсванията. Той работи с честота 5 MHz, има производителност 0,33 MIPS, изработен е по 3 микронна технология и има 29 000 транзистора. Процесорът има 20-битова адресна шина и 16-битова шина за данни. Адресируемата памет е 1 МВ, регистровата архитектура и системата от команди съществено се отличават от предшественика i8085, но общите идеи на концепцията на фирмата се запазват. Наред с основния микропроцесор е разработен и аритметичен копроцесор i8087, който се включва към i8086 за изпълнение на операции с числа с плаваща запетая (напр. при изчисленията на тригонометрични, логаритмични и други математически функции). На следващата година се появява i8088 – същият микропроцесор, но с 8-битова шина за данни. С него започва историята на най-популярните компютърни системи IBM PC. През целия период на развитие на IBM PC компютрите, Intel е неразривно свързан с това развитие, докато самата IBM има доста по-малко участие в него.
През 1985 г. се появява първият 32-битов микропроцесор i80386. Той съдържа 275 000 транзистора и е изработен по 1,5 микронна технология. Има 32-битова шина за данни и адреси, а адресируемата физическа памет достига 4 GB. Усъвършенстван е защитеният режим на работа и се въвежда странициране на паметта. Аритметичният копроцесор i80387 е предназначен за обработка на данни с плаваща запетая. Като междинна версия е разработен вариант с 16-битова шина (адресируема памет 16 МВ) i80386SX, който е предназначен за замяна на процесорите i80286 в компютрите от типа IBM PC/AT. На основата на i80386 се появяват първите версии на операционната система Windows и нейните приложения.
Приблизително от това време датира т. нар. ‘положителна обратна връзка’ в компютърната индустрия – при появата на всеки нов процесор, софтуерните компании пускат нови привлекателни софтуерни продукти, оползотворяващи възможностите им. Така новият софтуер постоянно изисква все по-мощни компютърни системи, а новият хардуер изисква нов софтуер за ефективно използване на ресурсите. Получава се затворен кръг, който може да се смята за естествен, но нарастващите изчислителни ресурси не стимулират разработчиците да разработват ефективни алгоритми за решаване на задачите. Типичен пример в това отношение е програмната среда Windows и разработваните на нейна основа приложни продукти.
Благодарение на ефективната си производствена политика, компанията Intel има лидерска позиция в областта на производството на микропроцесори за персонални компютри. В началото на 1990-те обаче редица други конкурентни компании като Advanced MicroDevices (AMD), Cyrix, Texas Instruments, IBM и др. започват да предлагат микропроцесори, функционално аналогични на i80386 и i80486, като по производителност и цена някои от тях дори превъзхождат процесорите на Intel. Опитите на Intel да защити по съдебен ред авторството си претърпяват неуспех, тъй като в щатското законодателство числените означения не се разглеждат като запазена марка. Intel е принуден да разработи микропроцесор от ново (пето) поколение, който вместо i80586 е наречен Pentium (пети)(1993). Първоначално Pentium работи с тактова честота 60 и 66 MHz и е 32-битов с 64-битова шина за данни. Съдържа около 3 100 000 транзистора и е изработен по 0,8 микронна технология. В тези микропроцесори е внедрена Харвардска архитектура с разделяне на потоците на командите и данните, като кеш-паметта се разделя на два блока – за команди и данни. Освен това в Pentium се въвежда суперскаларна архитектура, при която няколко операции се изпълняват едновременно в четири паралелно работещи устройства: две за обработка на целочислени данни; едно за обработка на числа с плаваща запетая и едно за команди с условен преход. Така изпълнението на командите се организира във вид на конвейер, съдържащ пет последователни степени ("конвейерна обработка на информацията"). Паралелно с развитието на Pentium се работи и по модификацията Pentium Pro, който става родоначалник на ново поколение микропроцесори Р6 (Pentium от шесто поколение). Той се отличава с разширяване на конвейерната обработка на данните (до 12 степени на паралелно заредени команди). В процесора е реализирано предварително изтегляне на информация от паметта, а самото изпълнение на операциите зависи от това дали данните за тях са готови. Така естествената последователност на изпълнение на командите може и да не се спазва, като по-задна команда може да се изпълни преди по-ранна, стига данните за нея да са готови. В резултат на това се получава до 1,5 – 2 пъти по-голяма производителност при работа с 32-битови операнди (данни). Обаче при работа с 16-битовите приложения (DOS) и с Windows 95 Pentium Pro не постига по-голяма производителност. Друго отличие на Pentium Pro е това, че в корпуса на микропроцесора е поместен втори чип, който осигурява вторична кеш-памет с честотата на процесорното ядро с големина 256 КВ. Микропроцесорът съдържа 5 500 000 транзистора, а вторичната кеш-памет – 15 500 000 транзистора. Двата чипа са свързани с отделна високоскоростна шина, работеща с тактовата честота на микропроцесора. Използването на две независими шини е характерна особеност на процесорите от семейството Р6. Основната системна шина FSB (Front Side Bus) работи с тактова честота, определена от възможностите на микропроцесора и системната шина: 66, 100, 133, 200, 400 или 533 MHz. За свързване на вторичната кеш-памет с процесора се използва отделна високоскоростна шина BSB (Back Side Bus), която обезпечава обмен на информацията с честота от 500 MHz до 2 GHz.
През 2001 г., Intel представят първия 64-битов процесор за сървъри Itanium, последван през 2002 г. от подобрения Itanium 2. През 2003 г. AMD представя първите 64-битови процесори за x86-съвместими настолни компютри Athlon 64 и Athlon 64FX и първия 64-битов процесор за сървъри Opteron. През 2004 г. Intel представя серия от версии на процесора Pentium 4 за настолни компютри, които поддържат 64 битовото разширение Intel 64. След това през 2005 г., Intel въвеждат 64-битовите версии на процесорите Xeon за работни станции и сървъри и двуядрените 64-битови процесори Pentium D и Pentium Extreme Edition, които са последните процесори, използващи NetBurst. След изчерпване на възможностите на NetBurst архитектурата, Intel създават редица 64-битови процесори, базирани на микроархитектурите Core, Atom и Nehalem. Успоредно с развитието на процесорите на „Интел“ и в конкуренция с тях се развиват и процесорите на AMD. През 2005 г. са представени 64-битовите процесори от семейството Athlon 64 X2, които са първите двуядрени процесори за настолни компютри на AMD. През 2007 г. започва производството на 64-битови процесори с новата архитектура AMD K10, с кодово име Phenom.
При създаването на 64-битови процесори се използват два основни подхода:
Производителност.
Производителността на съвременните компютри, изградени от интегрални схеми, се определя на практика от бързодействието на интегралните схеми, а то зависи от времената на превключване и продължителността на фронтовете на изходните сигнали. Бързодействието е много важно за микропроцесора в компютъра, колкото то е по-голямо, толкова той е по-производителен.
Съществуват няколко стандартни единици за измерване производителността: MIPS или FLOPS, които показват съответно колко милиона инструкции за секунда се изпълняват, или колко операции с плаваща запетая в секунда се изпълняват.
Микроархитектура.
При микропроцесорите се използват следните базови типове микроархитектури:
Различията се основават на начина на достъп до операнда – явно (чрез адресиране на регистър или клетка от паметта) или неявно (извличане от акумулатор или от върха на стека).
Класификация.
В зависимост от областта на приложение микропроцесорите притежават различни функционални възможности: 
Универсални микропроцесори.
Микропроцесорите с общо предназначение са универсални високопроизводителни ИС, способни да изпълнят широк кръг от задачи, които не зависят от програмния език. Едни от техните главни приложения са в компютърните системи. Компютърът като мощна работна станция или персонална система, за разлика от микрокомпютъра, изисква работа с широк клас програми от най-различно естество, сложност и обем. Това предполага:
Вградени системи.
Вградените микрокомпютърни системи са предназначени за вграждане в състава на по-голяма електронна система и се програмират обикновено еднократно, а задачите им са точно определени. Пример за вградени системи са тези за транспортните средства, за мобилните телефони, за телевизионните цели, за битовата бяла техника, в периферната компютърна техника като: принтери, скенери, камери и много други.
Микроконтролерите се използват за управление на цифрови системи с конкретно предназначение, с постоянно действаща програма, записана в постоянната памет. В преобладаващата част от приложенията те изискват следните параметри: 
Чипът на микроконтролера съдържа до няколко десетки хиляди транзистора и масовото му производство е евтино, а крайната цена е много ниска. С този клас микропроцесори могат да се конструират компактни електронни управляващи устройства без други ИС и изискващи минимален брой външни елементи.
Цифровите сигнални процесори (, DSP) са самостоятелен клас микропроцесори. Използват се във вградени системи със специализирано предназначение, изискващи бърза и сложна обработка на сигнали, много често в реално време. Обработката включва ограничен брой математически операции като събиране, умножение над многоразредни числа с фиксирана и плаваща запетая. Тя е необходима например за сложни многоцветни видеоизображения, качествени предаване на звук, във всички съвременни медицински електронни системи, за сложни научни изследвания и други.
Сигналните процесори изискват:
Тактов цикъл.
Един цикъл е най-малкият интервал от време, който може да съществува в работата на процесора. Всяко действие продължава най-малко един, а обикновено и повече цикли. Например при прехвърлянето на данни от и към паметта на процесор 8086 са му необходими четири цикъла плюс състояние на изчакване. Състоянието на изчакване е цикъл, при който процесорът не извършва никакво действие, за да не изпревари останалата част от компютъра. За същото нещо на процесор 80286 са му необходими два цикъла плюс състояние на изчакване.
Важна характеристика, често публикувана в отчетите за процесори, е "среден брой тактове за команда" (, CPI). При известно количество изпълнявани команди в програмата, този параметър позволява бързо да се оцени времето, нужно на централния процесор да изпълни дадената програма. Средният брой тактове на команда зависи от функционалната организация на процесора и архитектурата на системните команди.
Памети в микропроцесора.
Основното предназначение на паметта в микропорцесора е да съхранява двата типа данни – инструкции и оперативни данни. Във всички видове микропроцесори се използват полупроводникови памети с произволен достъп (RAM), имащи еднакво време за достъп tA до всяка произволно адресирана клетка и такива с последователен достъп. От друга страна, всички видове памети, включени физически в компютърната система, комуникират с микропроцесора. "Съществуващата и действаща" памет има "физически (абсолютни)" адреси и е известна като "реална" или "главна" памет "(main memory)".
Виртуална и кеш памет.
Всяка програма изисква определено адресно пространство в главната памет. При съвместна работа на няколко програми, необходимото общо адресно пространство се ограничава от обема на физическата RAM памет. За решаване на проблема, особено при по-рядко използвани програми, на помощ идва техниката на виртуалната памет (Virtual Memory VM), която се изразява в следното:
Вътрешна програма, част от операционната система, автоматично намира допълнително свободно адресно пространство на твърдия диск, известно като "Backing store". В
тази поддържаща област съхранените данни имат виртуални (логически) адреси, неизвестни на програмиста. Когато ще се работи с програма, съхранена във виртуалната област, специална програма автоматично трансформира обратно данните от виртуалната памет във физическото пространство с реални адреси. Цялата процедура е известна като "mapping", а самото копиране от виртуалната памет в главната е "swapping" или "paging (страниране)". Програмистът не се интересува къде са били разположени програмите във виртуалната област върху твърдия диск. За целта е необходимо в диска да има достатъчно свободно пространство.
От самото си създаване вътрешната скорост на микропроцесора е значително по-голяма от скоростта на обмен с външния блок на оперативната памет. Широко приложим начин за съвместяване и ускоряване на обмена на системата се постига чрез бързата оперативна кеш-памет. Тя служи
като буферна "свръхоперативна" памет между процесора и външната "RAM". Кеш-паметта е изпълнена физически като свърхбърза статична тригерна структура. Вградена в микропроцесорния чип, тя работи 
синхронно с вътрешната тактова честота. Достъпът до кеш-паметта заема обикновено от 1 до няколко цикъла, докато прекият достъп до външната памет може да изисква значително повече цикли.
Според мястото в системата, обема и бързодействието си, тя се систематизира на няколко нива – вътрешна "L1" – с най-малък обем и с най-голямо бързодействие, второ ниво "L2" с повишен обем и трето "L3" ниво.
В кеш-паметта се поместват временно най-често използваните и повтарящи се данни и инструкции на програми, съхранявани принципно в главната RAM памет.
Кеш-паметта има два атрибута (две полета) – "етикет", сочещ адреса на следващите данни, и "битове за валидност". Това позволява в нея да се съхраняват инструкции или данни, с които е работено
последно.
Работата и ефективността на кеш-паметта се основава на два принципа с вероятностно-статистически характер: на пространствена близост и на времева близост. Първата означава, че има голяма вероятност информацията, обработена в даден момент "Tn" да бъде записана в адрес, близък до предходния момент "Tn-1." Времевата близост се основава на голямата вероятност информацията обработвана "Тn" да е същата, обработена в предходни повтарящи се моменти. Такъв е случаят при цикли, рекурсивни алгоритми и др. 
На тази основа са разработени няколко подхода при организацията на кеш-паметта. При "асоциативната организация", тази памет се разделя на отделни блокове, като на всеки блок се присвоява етикет със собствен адрес и адреси на конкретни файлове. При избор на адрес се търси асоциация – съвпадение между 
етикетите на блокове и данните, съхранени в паметта. По-бърза, но с по-малка гъвкавост е "директната организация (Direct Mapped)". При нея част от логическия адрес се използва за директно определяне на реда на паметта, а останалата част – за етикета. "Смесената организация" обединява предимства 
на предните два вида.
Ефективността на кеш-паметта зависи значително от конкретните програми, изпълнявани от микропроцесора. Средно производителността на системата се повишава 30% – 50%.
Карта и пирамида на паметта.
Това е много удобна за практиката форма за онагледяване на адресното пространство.
Собствен двоичен физически адрес притежава всяка запомняща клетка от оперативната и програмната "ROM" памет, всеки регистър в ядрото на процесора и всеки от регистрите в допълнителните подсистеми. Адреси притежават също устройствата и регистрите, свързани с управлението на портовете на процесора, както и външните устройства свързвани към процесора. „Интелигентните“ МП разпознават автоматично по адреса дали външното устройство е включено и активирано към системата.
Множеството адреси, свързани с работата на микропроцесора, могат да заемат цялото адресно
пространство на всички памети NA"max""=2RA", независимо от типа на
запомнящото устройство.
Паметта се представя чрез правоъгълни масиви, разделени на отделни секции – адресни пространства, всяко според предназначението. В масива за временно съхранение първа е секцията на "най-бързата, свърхоперативна памет". Следва "паметта за оперативни данни", включваща вътрешните регистри, кеша и RAM (интегрирана и външна) и стековата секция.
Програмната памет заема отделен масив. В нея има запазени отделни адреси за специални инструкции. Такъв е например нулевият адрес 0000h – за операцията "RESET" – за начално установяване на системата. Специално адресно пространство е запазено за микропрограмите на фърмуера. Оставено е свободно адресно пространство за операционната система и за оперативните програми.
Области от паметта могат да бъдат отделени в самостоятелни области – "сегменти" или "страници". Страницата е с фиксиран обем (2, 4 или 8 КВ), докато сегментът може да е с променлив формат.
Мястото и връзката между отделните видове памети по отношение на обем, бързодействие и енергийна зависимост се онагледява удобно чрез пирамидален модел. На върха на пирамидата е регистровата вътрешна памет, с максимално бързодействие, но най-малък обем. Следва кеш-паметта, характерна за големите микропроцесори и цифровите сигнални процесори. Основната "RAM" памет е с най-голям обем, но с намалено бързодействие спрямо вътрешната и кеш-паметта. При първите поколения микропроцесори блокът памети съдържа външни ИС, а в чипа на процесора са интегрирани само ограничено число статични регистри. При компютърните системи оперативната памет "RAM" с голям обем е обособена като отделен модул, свързан с конектори с дънната платка.
В основата на пирамидата са енергонезависимите памети с голям обем – от оптичен, магнитен и полупроводников тип. Особено бързо развитие придобиват удобните за пренасяне и работа полупроводникови флашки и твърдите енергонезависими "SSD", все по-конкурентни на магнитните твърди дискове "HDD".
Моделът се отнася за всички микропроцесорни системи, независимо от предназначението им.
Директен достъп до паметта.
Оптимизацията на работата на микропроцесорите означава те да бъдат разтоварени от процедури, които могат да се извършват паралелно и без тяхно участие. Пример за такава оптимизация е възможността 
външни устройства да обменят данни с "RAM", без да ангажират "МП". За тази цел служи блокът за директен достъп до паметта – "DMA (Direct Memory Acssess)." При задействане, връзките към микропроцесора се блокират, а паметта комуникира директно с външното устройство. Процесорът остава свободен за редовната програма. Такива блокове са характерни за всички видове микропроцесори.

